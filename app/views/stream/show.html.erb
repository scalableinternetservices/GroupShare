<head>
  <meta http-equiv="refresh" content="10">
</head>

<div class="container center-block text-center">
  <h1><%= @stream.title %></h1>
  <h5>public_id <%= @stream.public_id %></h5>
  <h5>by <%= @stream.owner %></h5>
  <%= @stream.description %>
  <hr/>


  <% cache(cache_key_for_content_list(@stream.contents)) do %>
      <% @stream.contents.each do |content| %>
          <% cache(cache_key_for_content_row(content)) do %>
              <%= content.owner %>: <%= content.title %> <br/>
          <% end %>
      <% end %> <br/>
  <% end %>
  <hr/>

  <div class="row col-md-6 col-md-offset-3">
    <%= form_for :content, url: stream_content_index_path(@stream[:public_id]), class: "form-group" do |f| %>
        <%= f.text_field :owner, placeholder: "Your name", required: true, value: session[:owner], class: "form-control" %>
        <br/>
        <%= f.text_area :data, placeholder: "Enter data here", required: true, class: "form-control" %> <br/>
        <%= submit_tag("Submit") %>
    <% end %>
  </div>
</div>